(this.$WP=this.$WP||[]).push(["1x56sm",(e,p)=>{"use strict";var r,i,s,u,t,o,n=(e,p)=>{switch(p){case 0:return n(e,100);case 100:return e.popupMaxTier>100||e.popupSkipTiers&&e.popupSkipTiers.get(100)?n(e,200):100;case 200:return e.popupSkipTiers&&e.popupSkipTiers.get(200)?n(e,300):200;case 300:return e.popupSkipTiers&&e.popupSkipTiers.get(300)?n(e,400):300;case 400:return e.popupSkipTiers&&e.popupSkipTiers.get(400)?n(e,500):400;case 500:return 500;default:return 0}},a=(e,p,r,i)=>{var s=e.popupNodes,u=e.popupTier,t=e.popupTierEvents,o=e.popupSkipTiers,a=e.popupTierDismissals,T=p.tier;i&&(o=e.popupSkipTiers.set(T,!0)),e.popupNodes.some(e=>e.key===p.key)||(s=[...e.popupNodes,p],u=n(Object.assign({},e,{popupSkipTiers:o}),0),t=[]);var l=a.get(T),c=r.filter(e=>!(null==l?void 0:l.includes(e)));return c.length>0&&(l&&l.length>0&&c.length>0?a.set(T,[...l,...c]):a.set(T,r)),Object.assign({},e,{popupNodes:s,popupTierDismissals:a,popupTierEvents:t,popupTier:u,popupSkipTiers:o})},T=(e,p)=>{var r=e.popupTierEvents;if(p.forEach(e=>{r.includes(e)||(r=[...r,e])}),r.toString()!==e.popupTierEvents.toString()){var i,s,u={popupTierEvents:e.popupTierEvents,popupTier:e.popupTier};((null==(i=e.popupSkipTiers)?void 0:i.get(e.popupTier||0))||e.popupTierDismissals&&e.popupNodes.length>0&&void 0!==e.popupTier&&(r&&(null==(s=r)?void 0:s.length)>0||0===e.popupTier))&&(u=(e=>{var p,r=p=>Object.assign({},e,{popupTier:p,popupTierEvents:[]});if(Array.from(e.popupTierEvents||[]).sort().toString()===Array.from((null==(p=e.popupTierDismissals)?void 0:p.get(e.popupTier||0))||[]).sort().toString())switch(e.popupTier){case 0:return r(n(e,100));case 100:return r(n(e,200));case 200:return r(n(e,300));case 300:return r(n(e,400));case 400:return r(n(e,500));default:return e}return e})(Object.assign({},e,{popupTierEvents:r})));var t=e.popupMaxTier;return e.popupMaxTier<u.popupTier&&(t=u.popupTier),Object.assign({},e,{popupTierEvents:u.popupTierEvents,popupMaxTier:t,popupTier:u.popupTier})}return e},l=(e=(()=>({popupNodes:[],popupTierDismissals:new Map,popupTierEvents:[],popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}))(),p)=>{switch(p.type){case"REGISTER_POPUP":return void 0!==p.element?a(e,p.element,p.dismissEvents,p.skip):(console.error("Missing element for action in the popup reducer."),e);case"DISMISS_POPUP":return T(e,p.dismissEvents);default:return e}},c=({children:e})=>e,d=({children:e})=>{var[p,n]=i(l,{popupNodes:[],popupTierDismissals:new Map,popupTierEvents:[],popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}),a=s((e,p,r)=>{n({type:"REGISTER_POPUP",element:e,dismissEvents:p,skip:r})},[n]),T=s(e=>{n({type:"DISMISS_POPUP",dismissEvents:e})},[n]),c=r.useMemo(()=>({registerPopupTier:a,dismissEvents:T}),[a,T]);return r.createElement(t.Provider,{value:c},r.createElement(o,null,e),p.popupNodes.filter(e=>e.tier===p.popupTier).map(({node:e,key:p})=>r.createElement(o,{key:p},r.createElement(u,null,e))))},v=e=>{var{registerPopupTier:p,dismissEvents:i}=r.useContext(t),{factory:s,key:u,eventTypes:o,tier:n,skip:a}=e,T=r.useRef(null),l=r.useCallback(()=>{i(o)},[i,o]),c=r.useMemo(()=>({dismiss:l}),[l]);return r.useEffect(()=>{T.current=s(c),p({node:T.current,key:u,tier:n},o,a)},[o,s,u,p,c,n,a]),{dismiss:l}};return[()=>{t=r.createContext({registerPopupTier:()=>{},dismissEvents:()=>{}}),o=r.memo(c),e({DISMISS_POPUP:"DISMISS_POPUP",PopupHierarchyLithiumProvider:d,REGISTER_POPUP:"REGISTER_POPUP",dismiss:T,register:a,usePopupHierarchyRender:v})},[e=>(r=e,i=e.useReducer,s=e.useCallback),e=>u=e.ErrorBoundary]]},["cDcdfi","nIW_Rw"]]);
