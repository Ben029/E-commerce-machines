(this.$WP=this.$WP||[]).push(["PEYes_",(e,t)=>{"use strict";var r,n,a,s,l,i,u,o,c,d,v,g,m,p,f,h,T,R,E,A,O,S,y,b,P,k,I,C,_,L,N,F,j,w,q,D,x,M,H,U,G,Q,V={APS_SSR_ERROR:"fusion-apsError-count",APS_SSR_PARTIAL:"fusion-apsPartial-count",GRAPHQL_SSR_ERROR:"fusion-graphQLError-count"};function $(e,t){r("global",V[e],t)}var B=(e,t)=>{var{contentType:r="none",geoId:n="none"}=t||{};return`${String(n)}~${String(r)}~${e}`},K=e=>B("filters",e),Y=(e,t)=>{var{filters:r=[]}=e||{},s=K(e),l=((e,t)=>{var r=(e=>{if(!e)return new Set;var t=a(e),r=null==t?void 0:t.pageParameters.flatMap(e=>"string"!=typeof e.type&&"Filters"===e.type.name?e.type.filters:e).filter(({category:e})=>"CANONICAL"===e).map(e=>e.apiName);return new Set(r||[])})(t);return(null==e?void 0:e.filter(e=>e&&e.id&&!r.has(e.id)))||[]})(r,t);l.length>0?n.set(s,l):n.remove(s)},z=e=>e&&e.id?{id:e.id,value:(e.value||[]).filter(Boolean)}:null,W=(e,t)=>{return[...new Map((r=[...e,...t],r.filter(Boolean).map(z).filter(Boolean)).map(e=>[e.id,e])).values()];var r},J=(e,t)=>{var r=new Map;return e.forEach(e=>r.set(e.id,e)),t.forEach(e=>{var t=r.has(e.id)?r.get(e.id):{id:e.id,value:e.value},n=((e,t,r,n)=>{var a=new Set(t||e||[]);return null==r||r.forEach(e=>a.add(e)),null==n||n.forEach(e=>a.delete(e)),Array.from(a.keys())})(null==t?void 0:t.value,e.value,e.selected,e.deselected);r.set(e.id,{id:e.id,value:n})}),Array.from(r.entries()).map(([,e])=>e)},X=(e,t)=>{var r=[...e,...t],n=new Map;return r.forEach(e=>{var t,r,a,s=n.get(e.id);n.set(e.id,null!=s?(r=e,{id:(t=s).id,selected:[...new Set([...t.selected||[],...r.selected||[]])],deselected:[...new Set([...t.deselected||[],...r.deselected||[]])],value:((null==(a=r.value)?void 0:a.length)||0)>0?r.value:t.value}):e)}),Array.from(n.entries()).map(([,e])=>e)},Z=e=>{var t=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var n=e.getDate();return`${t}-${r}-${n=n<10?"0"+n:n}`},ee=(e,t)=>{var r=new Date(e);return t&&(r.setHours(t.hour),r.setMinutes(t.minute)),Z(r)},te=e=>{var t;if(null!=(null==e?void 0:e.find(e=>"navbar"===(null==e?void 0:e.id))))return[];var r=null==e?void 0:e.find(e=>"category"===(null==e?void 0:e.id)),n=null==r||null==(t=r.value)?void 0:t[0];return n&&n.length>2?[{id:"navbar",value:[`APLIST:${n}-true`]}]:[]};function re(e,t,r=!1){return!!t&&(!r||"attraction"!==e&&"attraction_product"!==e?t.filter(Boolean).length>0:t.filter(Boolean).filter(e=>e.id&&!w.has(e.id)).length>0)}var ne=e=>{var[{data:t,fetching:r,error:n}]=e;if(!1===r){if(n&&"CombinedError"===n.name)return 503;if(null==t?void 0:t.Result){var{status:a}=t.Result[0];if(!1===a.success||!0===a.partial)return 503}}return 200},ae=({children:e,href:t="#",theme:r="none",target:n="newTabDesktop",trackingDetails:a,accessibilityString:l,onClick:i})=>{var u=v(n),{trackClick:o}=g(a),c=s.useCallback(()=>(i&&i(),o(),!0),[i,o]);return s.createElement(d,{target:u,theme:r,onClick:c,href:t,"aria-label":l},e)},se={S:(e,t)=>{Object.assign(e.dataset,{strikethroughStart:t("fusion_strikethrough_start"),strikethroughEnd:t("fusion_strikethrough_end")})},SPAN:(e,t)=>{if(e.classList.contains("strikethrough")){var r=e.innerHTML,n=e.ownerDocument.createElement("s");n.innerHTML=r,se.S(n,t),e.innerHTML="",e.appendChild(n)}}},le=({tagName:e="span",content:t})=>{var{localize:r}=f(),n=s.useRef();return s.useEffect(()=>{var e=n.current;if(e){var t=new Set;if([...e.querySelectorAll("*")].map(e=>{[...e.getAttributeNames()].forEach(t=>{("class"!==t||"class"===t&&"strikethrough"!==e.getAttribute(t))&&e.removeAttribute(t)});var t=e.tagName.toUpperCase();return t in se&&se[t](e,r),t}).forEach(e=>{q.has(e)||t.add(e)}),t.size>0){var a=[...t].join(","),s="HtmlString should not contain: "+a;console.error(s),e.dataset.apsUnexpected=a}}},[t,r]),s.createElement(e,{className:"_2tsgCuqy",dangerouslySetInnerHTML:{__html:t},ref:n})},ie=e=>{var t,r,n=(null==e||null==(t=e.routeParameters)?void 0:t.pagee)&&parseInt(null==e||null==(r=e.routeParameters)?void 0:r.pagee,10);return n&&!Number.isNaN(n)?n:0};function ue(){var[{page:e,params:t}]=s.useContext(y);return(null==t?void 0:t.contentType)?t.contentType:(e=>(/(hotel|lastminute|showuserreviews|smartdeals)/i.test(e)?"hotel":/^(attraction_product|attractionproductreview)/i.test(e)&&"attraction_product")||/^attraction/i.test(e)&&"attraction"||/^restaurant/i.test(e)&&"restaurant"||null)(e)}var oe=e=>{var{attractions:t}=e,r={},n=(e=>{var t=[];return null!=e.adults&&e.adults>0&&t.push({ageBand:"ADULT",count:e.adults}),t.length||t.push({ageBand:"ADULT",count:2}),t})(t);return n.length>0&&(r={pax:n}),t.fromDate&&(r=Object.assign({},r,{startDate:Z(t.fromDate)})),t.toDate&&(r=Object.assign({},r,{endDate:Z(t.toDate)})),t.fromDate&&t.toDate&&(r=Object.assign({},r,{setByUser:!0})),Object.keys(r).length>0?Object.assign({},r):null},ce=e=>{var{hotels:t}=e;return{checkIn:(null==t?void 0:t.checkInDate)&&!t.defaultDates?Z(t.checkInDate):null,checkOut:(null==t?void 0:t.checkOutDate)&&!t.defaultDates?Z(t.checkOutDate):null,rooms:(()=>{var e=[];if(t){var{rooms:r,adults:n,children:a,childAgesPerRoom:s}=t;a>0&&(!s||r<s.length)&&console.error("Malformed hotel travel info, rooms vs. childAgesPerRoom",r,s.length,a);for(var l=0,i=0,u=0;u<n;u++)e[l]?e[l]=Object.assign({},e[l],{adults:e[l].adults+1}):(e[l]={adults:1},s[l]&&Array.isArray(s[l])&&s[l].length&&(e[l]=Object.assign({},e[l],{childrenAges:s[l]}),i+=s[l].length)),++l>=r&&(l=0);i!==(a||0)&&console.error(`Hotel info mismatch: totalChildren for ${r} rooms: ${i} != ${a}`,JSON.stringify(s))}return 0===e.length?null:e})(),setByUser:null!==t&&!t.defaultDates||null}},de=e=>{var{restaurants:t}=e;return t.date?{partySize:t.guests||1,reservationTime:t.date&&ee(t.date,t.time)}:null};function ve(){var[{page:e,path:t}]=s.useContext(y);return((e,t)=>/\/Hotel_Review-s1-+/i.test(t)?"HotelHighlight":e)(e,t)}function ge(){var e=ve(),[,{uid:t}]=s.useContext(y);return s.useMemo(()=>({screenName:e,pageviewUid:t}),[e,t])}var me=(e,t,r)=>{var{route:n,pageName:a}=e;if(n&&A(a)){var s=Object.assign({},n.params,{},t);if(n.page!==a||!S(n.params,s))return Object.assign({},n,{page:r||a,params:s})}return null},pe=(e,t,r)=>{var n,a=0!==t?String(t):null,s=((e,t)=>{var{listRequest:r,pageName:n}=e,{routeParameters:a=null}=r,s=null==a?void 0:a.filters;if("AttractionsFusion"===n){var l,i=null==a||null==(l=a.filters)?void 0:l.filter(e=>"allAttractions"!==(null==e?void 0:e.id));s=(null==i?void 0:i.length)||null!=t?i:[j]}return s})(e,a),l=null==(n=e.listRequest.routeParameters)?void 0:n.sort,i=me(e,{pagee:a,sort:l,filters:s});return i?(r(i),Object.assign({},e,{navigating:!0})):e},fe=(e,t)=>{var r=Object.assign({},e,{detailRequest:Object.assign({},e.detailRequest,{routeParameters:Object.assign({},e.detailRequest.routeParameters,{pagee:null})})}),n=me(e,{offset:null});return n?(t(n,"IN_PLACE"),Object.assign({},r,{navigating:!0})):r},he=(e,t)=>{var r;return Object.assign({},e,{commerce:Object.assign({},e.commerce,{attractionCommerce:Object.assign({},null==(r=e.commerce)?void 0:r.attractionCommerce,{startDate:null!=t.dates?Z(t.dates.startDate):null,endDate:null!=t.dates?Z(t.dates.endDate):null,setByUser:null!=t.dates})})})},Te=(e,t,r)=>{var n,a,s,l,i,u,o,c,d,v,g,m,p,f,h=(e,t)=>r(e,t||(A(e.page)?"PARAM_UPDATE":"PAGE_VIEW"));switch(t.type){case"reinitialize":var T,R,E=null==(T=e.detailRequest)?void 0:T.routeParameters,O=null==(R=t.newState.detailRequest)?void 0:R.routeParameters;return"detail"===e.screenType&&(null==E?void 0:E.contentId)===(null==O?void 0:O.contentId)&&(null==E?void 0:E.contentType)===(null==O?void 0:O.contentType)?(c=e,d=t.newState,f=(p=null==(v=c.commerce)||null==(g=v.attractionCommerce)?void 0:g.pax)&&(null==(m=d.commerce)?void 0:m.attractionCommerce)?Object.assign({},d.commerce,{attractionCommerce:Object.assign({},d.commerce.attractionCommerce,{pax:p})}):d.commerce,Object.assign({},d,{commerce:f,detailRequest:Object.assign({},d.detailRequest,{clientState:c.detailRequest.clientState})})):t.newState;case"updateRouteParameters":return Object.assign({},e,{listRequest:Object.assign({},e.listRequest,{routeParameters:Object.assign({},e.listRequest.routeParameters,{},t.routeParameters)})});case"setUpdateToken":return Object.assign({},e,{detailRequest:Object.assign({},e.detailRequest,{updateToken:t.updateToken}),listRequest:Object.assign({},e.listRequest,{updateToken:t.updateToken}),updateToken:t.updateToken});case"setFilter":return((e,t,r)=>{var{listRequest:n,pageName:a}=e,{routeParameters:s=null}=n,l=W((null==s?void 0:s.filters)||[],t);l=l.filter(({value:e})=>null!=e&&0!==e.length&&"REMOVE"!==e[0]);var i=a;if("AttractionsFusion"===a||"AttractionProductsFusion"===a){var u,o,c,d,v,g,m,p,f=t.find(e=>"navbar"===e.id),h=t.find(e=>"category"===e.id),T=t.find(e=>"type"===e.id),R=null==h||null==(u=h.value)?void 0:u[0],E=null==s||null==(o=s.filters)||null==(c=o.find(e=>"category"===(null==e?void 0:e.id)))||null==(d=c.value)?void 0:d[0],A=null==T||null==(v=T.value)?void 0:v[0],O=null==s||null==(g=s.filters)||null==(m=g.find(e=>"type"===(null==e?void 0:e.id)))||null==(p=m.value)?void 0:p[0];if(f){var S,y=(null==(S=f.value)?void 0:S[0])||"",[,b,P,k]=y.match(/^(ATTRACTIONOVERVIEW|APLIST):(\d*)-(true|false)/)||[];"false"===k&&("ATTRACTIONOVERVIEW"===b?(i="AttractionsFusion",l=P&&""!==P?[{id:"category",value:[P]}]:[j]):"APLIST"===b&&(i="AttractionsFusion","11867"===P?l=P&&""!==P?[{id:"category",value:["63"]}]:[]:"12024"===P&&(l=P&&""!==P?[{id:"category",value:["41"]}]:[])))}else h&&R!==E&&(l=[h]);l=E&&"61"===E&&A!==O?l.filter(e=>"navbar"!==(null==e?void 0:e.id)&&("category"===(null==e?void 0:e.id)||"type"===(null==e?void 0:e.id))):l.filter(e=>"navbar"!==(null==e?void 0:e.id))}var I=Object.assign({},n.routeParameters,{filters:[...l,...te(l)],pagee:void 0}),C=Object.assign({},e,{listRequest:Object.assign({},e.listRequest,{routeParameters:I})});Y(I,i);var _=me(e,I,"HotelsListFusion"===i?"HotelsFusion":null);return _?(r(_),Object.assign({},C,{navigating:!0})):C})(e,t.filters,h);case"resetPageNumber":return((e,t)=>{var r,n=Object.assign({},null==e||null==(r=e.listRequest)?void 0:r.routeParameters,{pagee:void 0}),a=Object.assign({},e,{listRequest:Object.assign({},e.listRequest,{routeParameters:n})}),s=me(e,n);return s&&t(s),a})(e,h);case"updateReviewFilters":return fe(Object.assign({},e,{detailRequest:Object.assign({},e.detailRequest,{updateToken:null,clientState:{userInput:(u=(null==(n=e.detailRequest.clientState)?void 0:n.userInput)||[],o=t.filters,[...o,...u].filter((e,t,r)=>t===r.findIndex(t=>(null==t?void 0:t.inputKey)===(null==e?void 0:e.inputKey))))}})}),h);case"removeReviewFilters":return fe(Object.assign({},e,{detailRequest:Object.assign({},e.detailRequest,{clientState:{userInput:(l=t.filtersToRemove,i=(null==(a=e.detailRequest.clientState)?void 0:a.userInput)||[],l.findIndex(e=>e&&"*"===e)>=0?[]:i.filter(e=>!l.includes(null==e?void 0:e.inputKey)))}})}),h);case"resetReviewFilters":return fe(Object.assign({},e,{detailRequest:Object.assign({},e.detailRequest,{clientState:{userInput:[]}})}),h);case"paginate":return pe(e,t.offset,h);case"setSort":return((e,t,r)=>{var n,a=Object.assign({},null==e||null==(n=e.listRequest)?void 0:n.routeParameters,{sort:t,pagee:void 0}),s=Object.assign({},e,{listRequest:Object.assign({},e.listRequest,{routeParameters:a})}),l=me(e,a);return l?(r(l),Object.assign({},s,{navigating:!0})):s})(e,t.sort,h);case"setAttractionsDates":return he(e,t);case"setAttractionsListDates":return pe(he(e,t),0,h);case"setAttractionsPax":return Object.assign({},e,{commerce:Object.assign({},e.commerce,{attractionCommerce:Object.assign({},null==(s=e.commerce)?void 0:s.attractionCommerce,{pax:t.pax})})});case"resetFilters":return((e,t)=>{var r,{listRequest:n,pageName:a}=e,s=[];"AttractionsFusion"===e.pageName&&0===((null==(r=s)?void 0:r.length)||0)&&(s=[j]);var l=Object.assign({},n.routeParameters,{filters:s,pagee:void 0}),i=Object.assign({},e,{listRequest:Object.assign({},e.listRequest,{routeParameters:l})});if(Y(l,a),t){var u=me(e,l);if(u)return t(u),Object.assign({},i,{navigating:!0})}return i})(e,t.noNavigate?null:h);case"navigate":return h(t.route),e;default:return console.error("Unhandled action",t.type),e}},Re={screenType:"list",contentType:null,pageName:null,listRequest:{},detailRequest:{},commerce:null,sessionId:null,currentGeoPoint:null,tracking:null,updateToken:null,route:null,navigating:!0},Ee=()=>s.useContext(H),Ae=({children:e})=>{T(),R();var[t,r]=function(){var e=s.useContext(y),t=s.useContext(b),r=s.useContext(P),l=function(){var[{page:e}]=s.useContext(y);return M.list.includes(e)?"list":M.detail.includes(e)?"detail":(console.error("Unknown mapping for",e,"assuming 'list'"),"list")}(),[i,{navigate:u}]=e,o=ue(),c=function(){var e=s.useContext(b),t=ue();return s.useMemo(()=>"hotel"===t?{hotelCommerce:ce(e)}:"attraction"===t||"attraction_product"===t?{attractionCommerce:oe(e)}:"restaurant"===t?{restaurantCommerce:de(e)}:null,[t,e])}(),{page:d}=i,v=I()?"MILES":"KILOMETERS",{sessionId:g}=r,{preferences:{currency:m}}=t,p=ge(),f=function(){var[{params:e,page:t}]=s.useContext(y),r=ue(),l=ge(),i=(()=>{var e,t,r=_(),[{params:n,page:a}]=s.useContext(y),l=null!=n.geoId?n.geoId:void 0,i=null!=n.contentId?parseInt(n.contentId,10):0,u=s.useMemo(()=>({query:x,variables:{contentId:i},pause:!r||"HotelsListFusion"!==a||null!=l&&l>0||0===i}),[r,a,l,i]),[{data:o,fetching:c,error:d}]=C(u);return null!=l&&l>0||c||d?l:null==o||null==(e=o.result)||null==(t=e[0])?void 0:t.geoId})();return s.useMemo(()=>{var s,u,o,c={tracking:l},d=!1;if(A(t)){var v,g=(e=>{var t,r,n=(r=null==(t=a("AppList"))?void 0:t.pageParameters.map(e=>e.apiName),new Set(r||[])),s={};return Object.entries(e||{}).forEach(([e,t])=>{n.has(e)&&(s[e]=t)}),s})(e);d=((null==g||null==(v=g.filters)?void 0:v.length)||0)>0,o=Object.assign({geoId:i},g)}else{var{offset:m}=e;d=Object.keys(e).length>1;var{filters:p,pagee:f}=d?{pagee:m?String(m):"0",filters:[]}:{};o={contentType:r,filters:p,geoId:i,pagee:f}}return o=d?(e=>{var t=(e=>n.get((e=>B("sort",e))(e))||null)(e);return t?Object.assign({},e,{sort:e.sort||t.sort,sortOrder:e.sort||t.sort}):e})(o):o,(e=>{var{routeParameters:t}=e;if(t){var r=(e=>n.get(K(e))||[])(t),{filters:a}=t;if(r&&a)return Object.assign({},e,{routeParameters:Object.assign({},t,{filters:W(r,a)})})}return e})(Object.assign({},c,{routeParameters:Object.assign({},o,{filters:[...(null==(s=o)?void 0:s.filters)||[],..."attraction"===r?te(null==(u=o)?void 0:u.filters):[]]})}))},[r,t,e,l,i])}(),h=function(){var e,[{params:t}]=s.useContext(y),r=ge(),n=ue(),a=null;return t.contentId?a=t.contentId:t.detailId&&(a=String(t.detailId)),t.offset&&(e=String(t.offset).replace(/[^0-9]/g,"")),s.useMemo(()=>({tracking:r,routeParameters:{contentType:n,contentId:a,pagee:e}}),[r,n,a,e])}(),T=s.useMemo(()=>({screenType:l,contentType:o,pageName:d,commerce:c,listRequest:f,detailRequest:h,currency:m,unitLength:v,sessionId:g,tracking:p,currentGeoPoint:null,route:i,navigating:!1}),[l,o,d,c,f,h,m,v,g,p,null,i]),[R,E]=s.useState(T);s.useEffect(()=>{E(e=>Te(e,{type:"reinitialize",newState:T},()=>{}))},[T]);var O=s.useCallback(e=>{E(t=>Te(t,e,u))},[u]);return s.useMemo(()=>[R,O],[R,O])}(),l=s.useMemo(()=>({state:t,dispatch:r}),[t,r]);return s.createElement(H.Provider,{value:l},s.createElement(E,{includeWebSiteSchema:!0}),s.createElement(O,null,e,s.createElement(h,null)))},Oe=()=>{var{dispatch:e}=Ee();return t=>{e({type:"setFilter",filters:t})}};function Se(){var{viewportCategory:e}=l(k);return i(()=>({value:e,mobile:"MOBILE"===e,tablet:"TABLET"===e,desktop:"DESKTOP"===e,tabletOrSmaller:"MOBILE"===e||"TABLET"===e,tabletOrLarger:"TABLET"===e||"DESKTOP"===e}),[e])}function ye(e,t=!0){if(e){var r=!!e.networkError,n=e.graphQLErrors&&e.graphQLErrors.length>0,a={networkError:r,graphQLError:n,anyError:r||n,toString:()=>e?function(e){var{networkError:t,graphQLErrors:r}=e,n=new Map;if(t){var{name:a,message:s}=t;n.set(`${a}: ${s}`,1)}return r&&r.forEach(e=>{var t;if("string"==typeof e)t="GraphQLError: "+e;else{var{name:r,message:a}=e;t=`${r}: ${a}`}var s=n.get(t);s?n.set(t,s+1):n.set(t,1)}),[...n.entries()].map(([e,t])=>`${e} (${t} times)`).join("\n")}(e):null};return t&&a.anyError&&$("GRAPHQL_SSR_ERROR",1),a}return{networkError:!1,graphQLError:!1,anyError:!1}}function be(e){var t,r,[n,a]=s.useState(null),l=s.useRef([]),{current:i}=l,[u,o]=s.useMemo(()=>{var{query:t,variables:r,pause:a}=e,{pollInterval:s,updateToken:i,lastQuery:u}=n||{},o=S(r,u),c=null==r?void 0:r.request;return c&&s&&s>0&&i&&o?(i.substr(-20),[{query:t,variables:Object.assign({},r,{request:Object.assign({},c,{updateToken:i})}),pause:a},!0]):(l.current=[],[e,!1])},[e,n]),[c,d]=N(u,ne),v=Array.isArray(null==c||null==(t=c.data)?void 0:t.Result)?c.data.Result[0]:null==(r=c.data)?void 0:r.Result;s.useEffect(()=>{var t,r;!1===(null==v||null==(t=v.status)?void 0:t.success)&&console.error("[useAPSQuery] query failure",null==v||null==(r=v.status)?void 0:r.message);var{pollingStatus:s=null}=(null==v?void 0:v.status)||{},{delayForNextPollInMillis:l=null,updateToken:i=null}=s||{},u=l||1e3;u&&u<1e3&&(u=1e3);var o,c={lastQuery:Object.assign({},e.variables),pollInterval:l,updateToken:i};return l&&l>0&&c&&!S(c,n)&&(o=setTimeout(()=>{a(c)},u)),()=>{o&&clearTimeout(o)}},[l,v,n,e,o]);var{pollingStatus:g=null}=(null==v?void 0:v.status)||{},m=!(null==g?void 0:g.updateToken);return s.useMemo(()=>{var{data:e,fetching:t,error:r}=c;if(o&&!t&&!r&&e){l.current=((e,t)=>{var r,n;if(!t)return e;var a=null==t||null==(r=t.Result)?void 0:r[0];if(!a)return e;if(!e||0===e.length)return a.sections;var{updatedClusterIds:s}=a;if(!s)return e;var l=[];e.forEach(e=>{var t={section:e,next:null},r={head:t,tail:t};l.push(r)});var i,u,o=(i=e,u=new Map,i.forEach((e,t)=>{if(e){var r=u.get(e.clusterId)||[];r.push(t),u.set(e.clusterId,r)}}),u),c=new Map,d=l[l.length-1];null==(n=a.sections)||n.forEach(e=>{var t={section:e,next:null},r=o.get(e.clusterId);if(null==r||0===r.length){var n=c.get(e.clusterId);n?(n.tail.next=t,n.tail=t,d=n):(d.tail.next=t,d.tail=t)}else{var a=r.shift(),s={head:t,tail:t};l[a]=s,d=s,c.set(e.clusterId,s)}}),s.filter(Boolean).forEach(t=>{var r;null==(r=o.get(t))||r.forEach(t=>{var r,n;t===e.length-1&&null!==(null==(r=l[t].head)?void 0:r.next)&&void 0!==(null==(n=l[t].head)?void 0:n.next)?l[t].head=l[t].head.next:l[t].head=null})});var v=[];return l.forEach(e=>{for(var t=e.head;null!=t;)v.push(t.section),t=t.next}),v})(l.current,e)||[];var n=((e,t)=>{if(e&&e.Result&&t){var r,n=null==(r=e.Result)?void 0:r[0];if(n)return Object.assign({},e,{Result:[Object.assign({},n,{sections:t})]})}return e})(e,i);if(n)return[{data:Object.assign({},e,{},n),fetching:t,error:r,polling:o&&!m},d]}return[{data:e,fetching:t&&!o,polling:!m,error:r},d]},[i,o,m,c,d])}function Pe(e){var{shouldPoll:t}=e;return function(e){var[r,n]=u(0),a=N(e),s=o(()=>{n(r+1)},[r]),[{error:l}]=a;return ye(l),c(()=>{n(0)},[e]),c(()=>{var[{data:e,fetching:n},l]=a;if(!n){var{poll:i,delay:u}=t(e,r);if(i&&u>0){var o=Math.max(u,300);setTimeout(()=>{l({requestPolicy:"cache-and-network"}),s()},Math.max(o,300))}}return()=>{}},[e,a,s,r]),a}}var ke={INFO:{alertLevel:"primary",log:e=>{}},WARNING:{alertLevel:"warning",log:e=>console.warn("[Fusion/APSUnexpected]",e)},ERROR:{alertLevel:"danger",log:e=>console.error("[Fusion/APSUnexpected]",e)}},Ie=({message:e,level:t="ERROR"})=>{var r=_(),n=ke[t]||ke.ERROR;return c(()=>{var a=`${t}~${e}`;r&&e&&!U.has(a)&&n.log(e),U.add(a)},[t,e,n,r]),null},Ce=({queryName:e,urqlError:t,apsStatus:r,emptyResponse:n,fetching:a,children:l})=>{var i,u,o,c=!1,d="retry",v=n&&!a;if(v||t){var g=v?" is empty":"",m=!!(null==t?void 0:t.networkError)||!1,p=t?" with error: "+(o=[],(null==(i=t)||null==(u=i.networkError)?void 0:u.message)&&o.push("network error"),(null==i?void 0:i.graphQLErrors.length)>0&&o.push(`[GraphQL] ${i.graphQLErrors[0].message.replace(/Error #[0-9]+/g,"Error #xxx")}${i.graphQLErrors.length>1?"...":""}`),o.join(" ")):"";console.error("[Fusion] GraphQL error for "+e,`GraphQL response${g}${p}`),c=v,d=m?"sync-error":"retry"}if(!a){if(!1===(null==r?void 0:r.success)){var f=(null==r?void 0:r.message)?" with message: "+(null==r?void 0:r.message):"";console.error("[Fusion] APS error for "+e,f)}null==r||r.partial}return c?s.createElement("div",null,s.createElement(L,null,s.createElement(F,{variant:d})),l):l},_e=e=>null==e,Le=e=>{if(_e(e))throw new Error("[Fusion] Unexpected null/undefined filter value: "+String(e));var t=Number(e);if(isNaN(t))throw new Error("[Fusion] Bad number value: "+String(e));return t};function Ne(e){var t=[];return _e(e)||null==e||e.forEach(e=>{null!=e&&t.push(e)}),t}var Fe=({typename:e})=>s.createElement(Ie,{message:"Unsupported type: "+String(e)});function je(e,t){return S(e,t)}function we(e){return s.memo(e,je)}var qe={nullCheck:"none",trackVisible:!0,memoize:!1};function De(e,t){var r,{trackVisible:n,nullCheck:a="error",extraContext:l,whenNull:i,memoize:u}=Object.assign({},qe,{},t),o=u?we(e):e,c=function(e){var{model:t}=e;if(null==t&&"none"!==a){try{console[a]("[Fusion/NullCheck] unexpected null model")}catch(e){console.error("[Fusion]",e)}if(i)return i()}var r,{trackingKey:u,trackingTitle:c}=(null==(r=e.model)?void 0:r.trackingKey)?{trackingKey:r.trackingKey,trackingTitle:r.trackingTitle}:{trackingKey:null,trackingTitle:null},d=s.createElement(o,e);return m(u)?s.createElement(p,{trackingKey:u,trackingTitle:c||"DEFAULT",context:l,noVisibility:!1===n},d):d};return c.displayName=`Fused(${r=e,r.displayName||r.name||"Component"})`,c}function xe(e,t=!0,r){return De(e,{trackVisible:t,extraContext:r,memoize:!0})}function Me(e,t=!0,r){return xe(e,t,r)}function He(e,t){var r=()=>s.createElement("div",null,t&&t.map((t,r)=>s.createElement("div",{key:r},s.createElement(e,{model:t}),s.createElement("hr",null))));return r.displayName="APSStory",r}return e({APSStory:He,FusionComponent:Me,apsMemo:we,createUseAPSPollingQuery:Pe,fuse:xe,fused:De,hasFilters:re,logFusionSsrMetric:$,removeNulls:Ne,useAPSQuery:be,useAnalyzeError:ye,useContentType:ue,useScreenName:ve,useViewportCategory:Se}),[()=>{j={id:"allAttractions",value:["true"]},w=new Set(["allAttractions","attractionType"]),q=new Set(["B","BR","I","U","S","EM","STRONG","SPAN"]),D=s.memo(le),(x=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"BlenderGeoIdQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"contentId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"result"},"name":{"kind":"Name","value":"SeoMetaData_getBlenderData"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"contentId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"geoId"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":130}}')).__key=32025661472868,M={list:["Hotels","HotelsFusion","HotelsList","HotelsListFusion","HotelsNear","Attractions","AttractionsFusion","Attraction_Products","AttractionProductsFusion","Restaurants","RestaurantsFusion"],detail:["Hotel_Review","Hotel_ReviewFusion","Restaurant_Review","Restaurant_ReviewFusion","Attraction_Review","Attraction_ReviewFusion","AttractionProductReview","AttractionProductReviewFusion"]},H=s.createContext({state:Re,dispatch:()=>{}}),U=new Set,G=s.createContext({loading:!1,polling:!1}),Q=s.createContext({donePolling:!1}),e({ALL_ATTRACTIONS_CATEGORY_FILTER_VALUE:"ALL",APSStory:He,APSUnexpected:Ie,APSUnsupportedType:Fe,ATTRACTIONS_CATEGORY_DAY_TRIPS:"63",CONTENT_TYPE_ATTRACTION:"attraction",CONTENT_TYPE_ATTRACTION_PRODUCT:"attraction_product",CONTENT_TYPE_HOTEL:"hotel",CONTENT_TYPE_RESTAURANT:"restaurant",CheckAPSQueryResponse:Ce,Entrypoint:Ae,FILTER_ATTRACTIONS_ALL_ID:"allAttractions",FILTER_ATTRACTIONS_CATEGORY_ID:"category",FILTER_ATTRACTIONS_L1_CATEGORY_ID:"navbar",FILTER_ATTRACTIONS_SUPPLIER_TOGGLE_ID:"attractionType",FusionComponent:Me,FusionTrackedLink:ae,HtmlString:D,ISODateString:Z,ISOTimeString:ee,LoadingContext:G,PAGE_ATTRACTION_DETAIL:"Attraction_ReviewFusion",PAGE_ATTRACTION_LIST:"AttractionsFusion",PAGE_ATTRACTION_PRODUCT_DETAIL:"AttractionProductReviewFusion",PAGE_ATTRACTION_PRODUCT_LIST:"AttractionProductsFusion",PAGE_HOTELS:"HotelsFusion",PAGE_HOTELS_LIST:"HotelsListFusion",PAGE_HOTEL_DETAIL:"Hotel_ReviewFusion",PAGE_RESTAURANT_DETAIL:"Restaurant_ReviewFusion",PAGE_RESTAURANT_LIST:"RestaurantsFusion",PollingContext:Q,REMOVE_FLAG:"REMOVE",applyFilterChangeList:J,apsMemo:we,createUseAPSPollingQuery:Pe,fuse:xe,fused:De,getPageeOffsetValue:ie,hasFilters:re,isNullOrUndefined:_e,logFusionSsrMetric:$,mergeFilterChangeLists:X,removeNulls:Ne,responseStatusCheck:ne,stringToNumber:Le,unionFilters:W,useAPSQuery:be,useAnalyzeError:ye,useContentType:ue,useEntrypointContext:Ee,useScreenName:ve,useSetFilter:Oe,useViewportCategory:Se})},[e=>r=e.logSsrMetric,e=>n=e.default,e=>a=e.getPageDefForPage,e=>(s=e,l=e.useContext,i=e.useMemo,u=e.useState,o=e.useCallback,c=e.useEffect),e=>d=e.default,e=>v=e.useLinkTarget,t=>{g=t.useFusionTracking,m=t.isValidTrackingKey,p=t.FusionTracking,e({useConsoleLogImpressions:t.useConsoleLogImpressions,useTracking:t.useFusionTracking})},e=>f=e.useLocalize,e=>h=e.default,e=>T=e.usePageViewMoniker,e=>R=e.useBounceRateTracking,e=>E=e.OrganizationJsonLd,e=>(A=e.isFusionPage,O=e.FusionAbTestingProvider),e=>S=e.default,e=>(y=e.Route,b=e.TravelInfo,P=e.Visitor,k=e.Device),e=>I=e.useIsMiles,e=>C=e.useQuery,e=>(_=e.useIsRobotSafe,L=e.MountedClientOnly),e=>N=e.useQueryRequiredSsr,e=>F=e.default]]},["B7vHz6","qKFflQ","F8raOV","cDcdfi","5KqyYa","mGAIj_","BfEQXK","0DsHEV","P5nZ8I","jb_4W2","mxARhC","nPqO2d","DY6uxn","YwNsO_","2R4xv2","-qDq4b","5X2em-","4Z07E2","OnmvvE","jhfxP-"]]);
