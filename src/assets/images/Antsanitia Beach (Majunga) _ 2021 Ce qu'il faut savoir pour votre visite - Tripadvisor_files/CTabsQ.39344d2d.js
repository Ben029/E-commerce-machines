(this.$WP=this.$WP||[]).push(["CTabsQ",(e,t)=>{"use strict";var n,r,a,l,u,o,s,i,c,f,d,m,g,D,v,h,p,k,y,E,P,O,A,B,S,b,C,x,R,I,w;function M({picker:e,inputField:t,onClose:n,inline:a,alignEdge:l,onReset:u}){var{viewportCategory:o}=i(O),s=null==e?void 0:e.renderPicker({setValue:e.setValue,onApply:e.onApply,value:e.value}),d=r.createElement(c,{size:"small",onClick:null==e?void 0:e.onApply},r.createElement(S,{id:"phoenix_picker_apply"})," "),m=u?r.createElement(f,{onClick:u,variant:"accent"},r.createElement(S,{id:"sng_fusion_list_filters_modal_reset"})):null;return"MOBILE"===o?e?r.createElement(h,{header:t,stickyHeader:!0,primaryButton:d,secondaryButton:m,slideFrom:a?"right":"bottom",onClose:n,heightOption:"full",closeButtonPosition:a?"left":void 0,closeButtonIcon:a?"single-chevron-left":void 0},r.createElement("div",{className:"_2tkHAKDl"},s||"")):null:r.createElement(r.Fragment,null,a&&e&&r.createElement("div",{className:"SbEP4uFH"},s),!a&&(null==e?void 0:e.ref.current)&&r.createElement(r.Fragment,null,r.createElement(B,{animated:!0,unstyled:!0,position:"below",shiftY:12,arrowType:"none",alignEdge:l,target:e.ref.current,autoFocus:!0,shouldRestoreFocus:!0},r.createElement("div",{className:"_2_4wMH69"},s,e.showApplyButton&&r.createElement("div",{className:"_2YJ1IMhe"},d))),r.createElement(k,{event:"click",callback:n})))}function T({pickers:e,autoAdvance:t=!0,onBeforeAdvance:n=(()=>!0),onOpen:i,onClose:c,onComplete:f=(()=>{}),autoOpen:g=!1,autoOpenDelay:D=2e3,inputFieldVariant:v="ENTRY",inline:h=!1,children:k,onReset:E,alignEdge:P="left",mapSurface:O}){var A=l(null),B=l(null),S=l(null),{trackClick:b}=y(),R=C(),I=u(()=>{R&&null!=B.current&&B.current.ref.current.focus()},[R]),w=u(e=>{e&&S.current?S.current(e):t&&A.current&&B.current&&n(B.current)&&null==A.current()&&(I(),f())},[t,n,f,I]),T=o(()=>Array.from({length:e.length},()=>r.createRef()),[e.length]),_=o(()=>e.map((e,t)=>Object.assign({},e,{setValue:t=>{var n=e.setValue?e.setValue(t):null;w(n)},onApply:()=>{var t=e.onApply?e.onApply():null;w(t)},ref:T[t]})),[w,e,T]),V=g&&0===D,{openPicker:H,nextPicker:N,closePicker:F,currentPicker:j,getPickerValues:W,isOpen:L}=function(e,t=!1){var n,[r,o]=a(t?null==(n=e[0])?void 0:n.name:null),s=l(null);s.current=e.find(e=>e.name===r);var i=u(()=>{var t;if(!r)return null;var n=e.findIndex(e=>e===s.current),a=null==(t=e[n+1])?void 0:t.name;return o(a),a},[r,e]),c=u(()=>{o(null)},[o]),f=u(t=>{var n=t||e[0].name;o(n)},[e]),{trackClick:d}=y();return x("Escape",c),{isOpen:!!r,nextPicker:i,closePicker:c,openPicker:f,getPickerValues:e=>{var t=s.current;return{isOpen:e.name===(null==t?void 0:t.name),isDimmed:null==t||e!==t,onClick:()=>{d({clientContext:`click${e.name[0].toUpperCase()}${e.name.substring(1)}PickerButton`}),o(e.name)}}},currentPicker:s.current}}(_,V);A.current=N,B.current=j,S.current=H,s(()=>{var e=g&&!V&&S.current?setTimeout(S.current,D):null;return()=>clearTimeout(e)},[g,D,V]),s(()=>{j&&(b({clientContext:O?"mapDatepicker":"pickerOpened",clientParameter:j.name}),null==i||i(j))},[j,b,i,O]);var z=()=>{I(),F(),j&&(null==c||c(j))},K=(e=!1)=>r.createElement("div",null,r.createElement(m,{variant:v},_.map(e=>e.renderButton(null==j?void 0:j.name,function(e,t,n){return{selected:!n.isDimmed,onClick:n.onClick,key:e.name,ref:e.ref}}(e,0,W(e))))),e&&r.createElement("div",{className:"_2Ib2Ahii"},r.createElement(d,{marginY:"spacing-05"}))),G=E?()=>{E(),w("startDate")}:void 0,Y=()=>r.createElement(p,{events:["onClick","onTouchStart"]},K(),r.createElement(M,{picker:j,inputField:K(!0),onClose:z,inline:h,alignEdge:P,onReset:G}));return x("Escape",z),k?k({renderPickerFlow:Y,currentPicker:j,closePicker:F}):Y()}var _=({fromMonth:e,monthRange:t,maxRangeDays:r,startDate:a,endDate:l,onDateSelect:u,onDateReset:o,onDateRangeSelect:s,numberOfMonths:i,layoutStyle:c,fullHeight:f,fullWidth:d,isEndDate:m=!1,disableBefore:g=new Date})=>{var[D,v]=n.useState(m?a:null);n.useEffect(()=>{v(m?a:null)},[a,m]);var h=n.useCallback((e,t)=>{t||(!D||!m&&D>=e?(v(e),u&&u(e,!1)):e>D?(u&&u(e,!0),s&&s(D,e),v(null)):e<D&&(u&&u(e,!1),v(e)))},[D,m,s,u]);return n.createElement(R,{onDateReset:o,month:D||a,fromMonth:e,monthRange:t,numberOfMonths:i,layoutStyle:c,startDate:D||a,endDate:D?null:l,onDateSelect:h,fullWidth:d,fullHeight:f,maxRangeDays:D||m?r:null,disableBefore:g})};function V(e,t,n,a,l,u,o){return n?r.createElement(g,Object.assign({date:u?e:t},o)):u?r.createElement(D,Object.assign({from:a?null:e,to:a?null:t},o)):null}function H({startDate:e,endDate:t,isDefaultDates:n,setDates:a,resetDates:l,maxRangeDays:u,disableBefore:s,fromMonth:c}){var{viewportCategory:f}=i(O),d="MOBILE"===f,m="DESKTOP"===f;return o(()=>{var o=a=>({setValue:o})=>r.createElement(_,{fromMonth:c||new Date,monthRange:d?13:12,numberOfMonths:m?2:1,maxRangeDays:null==u?30:u,onDateReset:n?void 0:l,startDate:e,endDate:t,layoutStyle:d?"infiniteVerticalScroll":"paginated",onDateSelect:o,isEndDate:a,disableBefore:s||new Date,fullWidth:!0});return[{name:"startDate",value:e,setValue:e=>{a(e,!0)},onApply:()=>{n&&a(e,!0)},renderButton:(r,a)=>V(e,t,r,n,0,!0,a),renderPicker:o()},{name:"endDate",value:t,setValue:t=>t<e?(a(t,!0),"endDate"):(a(t,!1),null),renderButton:(r,a)=>V(e,t,r,n,0,!1,a),renderPicker:o(!0)}]},[t,n,m,d,l,a,e,u,s,c])}function N({startDate:e,endDate:t,isDefaultDates:n,setDates:a,resetDates:l,maxRangeDays:u,disableBefore:s,fromMonth:c}){var{viewportCategory:f}=i(O),d="MOBILE"===f,m="DESKTOP"===f;return o(()=>({name:"dateRange",value:e,setValue:e=>a(e)?null:"dateRange",renderButton:(a,l)=>function(e,t,n,a,l,u,o){return r.createElement(D,Object.assign({from:a?null:e,to:a?null:t},o))}(e,t,0,n,0,0,l),renderPicker:({setValue:a})=>r.createElement(_,{fromMonth:c||new Date,monthRange:d?13:12,numberOfMonths:m?2:1,maxRangeDays:null==u?30:u,onDateReset:n?void 0:l,startDate:e,endDate:t,layoutStyle:d?"infiniteVerticalScroll":"paginated",onDateSelect:a,disableBefore:s||new Date,fullWidth:!0})}),[t,n,m,d,l,a,e,u,s,c])}var F=({fromMonth:e,monthRange:t,selectedDate:r,onDateSelect:a,numberOfMonths:l,layoutStyle:u,fullWidth:o,fullHeight:s,disabledDates:i})=>{var c=n.useCallback((e,t)=>{t||a&&a(e)},[a]);return n.createElement(R,{month:r,fromMonth:e,monthRange:t,numberOfMonths:l,layoutStyle:u,startDate:r,onDateSelect:c,fullHeight:s,fullWidth:o,disabledDates:i})};function j({date:e,setDate:t,availableDates:n,isDefaultDates:a}){var{viewportCategory:l}=i(O),c="MOBILE"===l,f="DESKTOP"===l,d=u(e=>!!n&&!n.has(e.toISOString().split("T")[0]),[n]),m=d(e)&&n?(e=>{var t=null==e?void 0:e.values().next().value;if(null!=t){var[n,r,a]=t.split("-").map(e=>parseInt(e,10));return new Date(n,r-1,a)}return null})(n):e;return s(()=>{m&&m.getTime()!==e.getTime()&&t(m)},[e,m,t]),o(()=>({name:"date",value:m,setValue:e=>{t(e)},onApply:()=>{a&&t(e)},renderButton:function(e,t){return r.createElement(g,Object.assign({date:a?null:m},t))},renderPicker:function({setValue:e}){return r.createElement(F,{fromMonth:new Date,monthRange:24,numberOfMonths:f?2:1,selectedDate:m,layoutStyle:c?"infiniteVerticalScroll":"paginated",onDateSelect:e,fullWidth:!0,disabledDates:d})}}),[f,c,t,d,m,a,e])}var W=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,L=e=>{if(null!=e&&W.test(e)){var t=new Date(e+"T00:00");if(!isNaN(t.getTime()))return t}return null},z=(e,t)=>{var n=L(e);if(null!==n)return n;var r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate()+t)};function K(e,t,n){var{state:{commerce:r}}=E(),{update:{attractions:{setDates:a}}}=i(A),{trackClick:l}=y(),{startDate:o,endDate:s}=(null==r?void 0:r.attractionCommerce)||{},c=L(o),f=L(s),d=u((t,r)=>{l({clientContext:n?"mapDatepicker":"setAttractionsDates",clientParameter:JSON.stringify({startDate:P(t),endDate:P(r)})}),a(t,r),e({startDate:t,endDate:r})},[e,a,l,n]),m=u(e=>{var t=new Date(e.getTime()+864e5);d(e,t)},[d]),g=u(()=>{a(null,null),l({clientContext:"resetAttractionsDates"}),e(null)},[e,a,l]),D=z(null==t?void 0:t.startDate,0),v=z(null==t?void 0:t.endDate,1);return{singleDate:c||D,startDate:c||D,endDate:f||v,isDefaultDates:!(c&&f||(null==t?void 0:t.setByUser)),setDateRange:d,setSingleDate:m,resetDates:g}}function G(){var e,{state:{commerce:t},dispatch:n}=E(),{update:{attractions:{setPassengers:r}}}=i(A),{trackClick:a}=y({clientContext:"setAttractionsPax"}),l=null==t||null==(e=t.attractionCommerce)?void 0:e.pax;return{pax:o(()=>{var e=new Map;return l&&l.filter(Boolean).forEach(t=>{e.set(t.ageBand,t.count)}),e},[l]),setPax:u(e=>{var t=[];e.forEach((e,n)=>t.push({ageBand:n,count:e})),a({clientParameter:JSON.stringify({pax:t})});var l=e.get("ADULT")||0,u=e.get("CHILD")||0;r(l,u),n({type:"setAttractionsPax",pax:t})},[n,a,r])}}function Y(e){var t,n,r,{hotels:l,update:{hotels:{setStayDates:o}}}=i(A),[s,c]=a(!1),{trackClick:f}=y(),d=u((e,t)=>{f({clientContext:"setHotelDates",clientParameter:JSON.stringify({checkIn:P(e),checkOut:P(t)})}),o(e,t),c(!0)},[o,f]),m=u(()=>{f({clientContext:"resetHotelDates"});var e=new Date;e.setDate(e.getDate()+1),o(new Date,e),c(!1)},[o,f]);return null===l||l.defaultDates?(t=z(null==e?void 0:e.checkIn,0),n=z(null==e?void 0:e.checkOut,1),r=(null==e?void 0:e.setByUser)||null):(t=l.checkInDate,n=l.checkOutDate,r=!l.defaultDates),{checkIn:t,checkOut:n,setByUser:r,setDates:d,resetDates:m,isNewDate:s}}function U(e){var t,{hotels:n,update:{hotels:{setGuestInfo:r,setTravelInfo:a}}}=i(A),{trackClick:l}=y(),{defaultRooms:s,defaultAdults:c,defaultChildrenAges:f,checkIn:d,checkOut:m}=o(()=>(e=>{if(null==(null==e?void 0:e.rooms))return w;var t=0,n=[],{rooms:r}=e;return r.filter(Boolean).forEach(e=>{t+=null==e.adults?0:e.adults,null!=e.childrenAges&&n.push(...e.childrenAges.filter(Boolean))}),{defaultRooms:r.length,defaultAdults:t,defaultChildrenAges:n,checkIn:e.checkIn,checkOut:e.checkOut}})(e),[e]),g=u(({rooms:e,adults:t,childrenAges:u})=>((e,t,n,r,a,l)=>(u,o,s)=>{l({clientContext:"setHotelGuests",clientParameter:JSON.stringify({rooms:u,adults:o,childrenAges:s})});var i=Array.from(Array(u),()=>[]);if(s.length>0)for(var c=[...s],f=Math.floor(c.length/u),d=c.length-f*u,m=0;m<i.length;m++){var g=f+(m<d?1:0);g>0&&(i[m]=c.slice(0,g),c=c.slice(g))}null!=n?e(o,u,i):t(r,a,o,u,i)})(r,a,n,d,m,l)(e,t,u),[r,a,n,d,m,l]);return[{rooms:(null==n?void 0:n.rooms)||s,adults:(null==n?void 0:n.adults)||c,childrenAges:(null==n||null==(t=n.childAgesPerRoom)?void 0:t.flat())||f},g]}var J=e=>Array.from(e.values()).reduce((e,t)=>e+t,0);function $({passengerInfo:e,currentPax:t,setPax:n,showApplyButton:l}){var[i,c]=a(t),[f,d]=a(null),{localize:m}=b();s(()=>{c(t)},[t,c]),s(()=>{var r;if(e){var a=!1,l=new Map(t),u=null==(r=e.ageBands)?void 0:r.filter(Boolean);u&&u.length&&(u.forEach(e=>{var n=null!=e.minTravelersPerBooking?e.minTravelersPerBooking:0,r=null!=e.maxTravelersPerBooking?e.maxTravelersPerBooking:10,u=t.get(e.ageBand)||0;u<n?(l.set(e.ageBand,n),a=!0):u>r&&(l.set(e.ageBand,r),a=!0)}),t.forEach((e,t)=>{u.find(e=>e.ageBand===t)||(l.delete(t),a=!0)})),a&&n(l)}},[t,e,n]);var g=u((e,t)=>{d(null),c(n=>new Map([...n.entries(),[e,t]]))},[]),D=o(()=>J(t),[t]),h=u(()=>{return t=null==e?void 0:e.requiresAdultForBooking,n=i,!1!==t&&0===n.get("ADULT")&&0===n.get("SENIOR")?(d(m.string("attractions.booking.errors.no_travelers")),!1):0===J(i)?(d(m.string("attractions.booking.select_travelers_to_see_availability")),!1):!!(e=>{var t=!0;return e.forEach((e,n)=>{"INFANT"!==n&&e>0&&(t=!1)}),!t})(i)||(d(m.string("exp_booking_no_only_infants")),!1);var t,n},[i,m,e]),p=u(()=>h()?(function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,l;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(a of t.entries())if(!n.has(a[0]))return!1;for(a of t.entries())if(!e(a[1],n.get(a[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(a of t.entries())if(!n.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(t[a]!==n[a])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(l=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,l[a]))return!1;for(a=r;0!=a--;){var u=l[a];if(!e(t[u],n[u]))return!1}return!0}return t!=t&&n!=n}(i,t)||n(i),null):"pax",[i,n,h,t]);return o(()=>({name:"pax",showApplyButton:l,value:null,onApply:p,renderButton:function(e,t){return r.createElement(v,Object.assign({guests:D},t))},renderPicker:function(){return e?r.createElement(I,{passengerInfo:e,selections:i,onAgeBandChange:g,errorMessage:f}):null}}),[f,i,p,e,g,l,D])}return e({useAttractionDates:K,useAttractionPax:G,useDateRangePicker:N,useDateRangePickers:H,useHotelDates:Y,useHotelGuests:U,usePaxPicker:$,useSingleDatePicker:j}),[()=>{w={defaultRooms:1,defaultAdults:2,defaultChildrenAges:[],checkIn:new Date,checkOut:new Date},e("default",T),e({useAttractionDates:K,useAttractionPax:G,useDateRangePicker:N,useDateRangePickers:H,useHotelDates:Y,useHotelGuests:U,usePaxPicker:$,useSingleDatePicker:j})},[e=>(n=e,r=e.default,a=e.useState,l=e.useRef,u=e.useCallback,o=e.useMemo,s=e.useEffect,i=e.useContext),e=>(c=e.default,f=e.BorderlessButton),e=>d=e.default,e=>(m=e.InputField,g=e.DateInputFieldItem,D=e.DateRangeInputFieldItem,v=e.GuestsInputFieldItem),e=>h=e.SlideInModal,e=>p=e.default,e=>k=e.default,e=>(y=e.useTracking,E=e.useEntrypointContext,P=e.ISODateString),e=>(O=e.Device,A=e.TravelInfo),e=>B=e.default,e=>(S=e.default,b=e.useLocalize),e=>C=e.useKeyboardNavigationMode,e=>x=e.useKeyboardEvent,e=>R=e.default,e=>I=e.default]]},["cDcdfi","7yGKf-","jPSRY1","pyjSAG","E1X9WP","_cZwhS","Dg5_-9","PEYes_","2R4xv2","MHKLZN","0DsHEV","W3_c4H","8xs-IB","-ZZ9nz","6SswlX"]]);
